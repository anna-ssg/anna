# Anna

```text
    ___
   /   |  ____  ____  ____ _
  / /| | / __ \/ __ \/ __ `/
 / ___ |/ / / / / / / /_/ /
/_/  |_/_/ /_/_/ /_/\__,_/

A static site generator in go
```

Inspired by [Hugo](https://gohugo.io) and [Saaru](https://github.com/anirudhRowjee/saaru), this static site generator aims to take performance to the next level with parallel rendering, live reload and so much more, all in Go.

Pronounced: `/…ênÀê…ê/` which means rice in Kannada üçö

This Project is a part of the ACM PESU-ECC's yearly [AIEP](https://acmpesuecc.github.io/aiep) program, and is maintained by [Adhesh Athrey](https://github.com/DedLad), [Nathan Paul](https://github.com/polarhive), [Anirudh Sudhir](https://github.com/anirudhsudhir), and [Aditya Hegde](https://github.com/bwaklog)

## Directory structure

The ssg currently requires the following directory structure

```text
ssg/
|--cmd/
|--pkg/
|--site/ (All site data and rendered content is stored here)
  |--content/
  |  |--index.md (This file is necessary and cannot be omitted)
  |  |--about.md
  |  |--posts/
  |     |--post1.md
  |  ....
  |
  |--layout/
  |  |--page.html (This file is necessary and cannot be omitted)
  |  |--posts.html (This file is necessary to create a 'Posts' section)
  |  |--partials/
  |     |--header.html
  |  ....
  |  |--config.yml (This file is necessary and cannot be omitted)
  |
  |--static/
  |  |--scripts/
  |     |--light.js
  |  |--image1.jpg
  |  |--fonts
  |     |--font1.ttf
  |  |--images
  |     |--image2.png
  |  ....
  |
  |--rendered/ (This directory is created by the ssg)
    |--index.html
    |--about.html
    |--posts.html
    |--posts/
        |--post1.html
    |--static/
        |--image1.jpg
        |--fonts/
    ....
```

## Description of the directory structure

- All of the site data, including the content, configuration and static files, are stores in site/. The rendered/ directory generated by ssg is also stored in site/.

- The markdown content for the site is stored in `content/` it can contain subdirectories as the folder is recursively rendered.
- Static assets such as images and fonts are stored in `static/`
- Scripts are stored in the `scripts/` dir in `static/`
- The layout of the site is configured using html files in `layout/`
  - The `config.yml` file stores the configuration of the site and includes details such as the baseURL
  - The `page.html` file defines the layout of a basic page of the site
  - The `posts.html` file defines the layout of a page displaying all the posts of the site
  - The layout files can be composed of smaller html files which are stored in the `partials/` folder

#### Layout

The layout files can access the following rendered data from the markdown files:

- `{{.Body}}` : Returns the markdown body rendered to HTML
- `{{.Filename}}` : Returns the name of the current file
- `{{.Date}}` : Returns the last modified date of the current file
- `{{.Frontmatter.[Tagname]}}` : Returns the value of the frontmatter tag
  - Example: `{{.Frontmatter.Title}}` : Returns the value of the title tag
- `{{.Layout.[Tagname]}}`: Returns the particular configuration detail of the page
  - Example: `{{.Layout.Navbar}}` : Returns a string slice with the names of all the navbar elements

## Notes

1. Images: To add images, add it to the 'static/' folder or a subdirectory under it. Use `/static/[imagename.format]` as the image link format in the markdown files.

2. CSS: CSS can be added in the following ways:

- In an external file in the `static/` directory and linked to the layout files
  - To link the stylesheet, use the `baseURL` along with the relative path

    Example: `<link rel="stylesheet" href="{{.Layout.BaseURL}}static/style.css">`

- Placed inside `<style></style>` tags in the `<head></head>` of the layout files
- Inline with the html elements

3. Frontmatter: Metadata such as the title of the page can be added as frontmatter to the markdown files in the YAML format. Currently, the following tags are supported:

- `title` : The title of the current page
- `date`: The date of the current page
- `draft`: When set to 'true', the current page is not rendered unless the '-d' flag is used
- `type`: Sets the type of the page. Use type 'post' for posts
- `previewimage`: Stores the preview image of the current page
- `description`: Stores the description of the current post previewed in posts.html
- `scripts`: Stores a slice of javascript files to be included with the current page only
- `tags:`: Stores a slice of the page tags

(**The above tags are Frontmatter tags**)

4. config.yml: This file stores additional information regarding the layout of the site

- `navbar`: Stores the links to be added to the navbar (same name as the markdown files)
- `baseURL`: Stores the base URL of the site
- `siteTitle`: Stores the name of the site
- `siteScripts`: Stores the javascript files to be included with every page
- `author`: Stores the author of the site

(**The above tags are Layout tags**)

### Sample `config.yml`

```yml
navbar:
  - about
  - posts

baseURL: http://localhost:8000/
# Replace this with the actual canonical-url of your site.

# baseURL tells search-engines (SEO), web-crawlers (robots.txt) so people can discover your site on the internet.
# It's also embeded in your sitemap / atom feed and can be used to change metadata about your site.

siteTitle: anna
siteScripts:
author: Anna
```



## Install

Once you have a directory structure, install `anna` using:

```sh
go install github.com/acmpesuecc/anna@latest 
```

Or if you have git installed, clone our repository:

```sh
git clone github.com/acmpesuecc/anna --depth=1
cd anna
go run .
```

## Flags

```text
Usage:
  anna [flags]

Flags:
  -a, --addr string     ip address to serve rendered content to (default "8000")
  -d, --draft           renders draft posts
  -h, --help            help for ssg
  -s, --serve           serve the rendered content
  -v, --validate-html   validate semantic HTML
```
